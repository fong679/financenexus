<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Nexus Finance ‚Äî Calculator Suite</title>
<link href="https://fonts.googleapis.com/css2?family=DM+Sans:wght@400;500;700&family=DM+Mono:wght@400;500&display=swap" rel="stylesheet" />
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
<style>
  /* Base Variables (Dark Mode by Default) */
  :root {
    --primary: #4F46E5;
    --primary-light: #818CF8;
    --primary-dim: rgba(79,70,229,0.15);
    --emerald: #10B981;
    --emerald-light: #6EE7B7;
    --slate: #0F172A;
    --border: #334155;
    --muted: #94A3B8;
    --text: #F8FAFC;
    --surface: #1E293B;
    --surface-high: #263346;
    --accent: #F59E0B;
    --bg-gradient: radial-gradient(ellipse at 20% 0%, #1a1f4e33 0%, transparent 60%),
                    radial-gradient(ellipse at 80% 100%, #0d3b2633 0%, transparent 60%);
  }

  /* Light Mode Variables */
  [data-theme="light"] {
    --slate: #F1F5F9;
    --border: #CBD5E1;
    --muted: #64748B;
    --text: #0F172A;
    --surface: #FFFFFF;
    --surface-high: #F8FAFC;
    --bg-gradient: radial-gradient(ellipse at 20% 0%, #e0e7ff66 0%, transparent 60%);
    --primary-dim: rgba(79,70,229,0.1);
  }

  * { box-sizing: border-box; margin: 0; padding: 0; }
  body {
    background: var(--slate);
    background-image: var(--bg-gradient);
    color: var(--text);
    font-family: 'DM Sans', sans-serif;
    font-size: 16px;
    line-height: 1.5;
    min-height: 100vh;
    transition: background 0.3s ease, color 0.3s ease;
  }

  /* Top Bar */
  .topbar {
    position: sticky; top: 0; z-index: 100;
    display: flex; align-items: center; justify-content: space-between;
    padding: 0 24px; height: 70px;
    background: var(--surface);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
  }
  .topbar-brand { display: flex; align-items: center; gap: 14px; }
  .brand-icon {
    width: 40px; height: 40px; border-radius: 10px;
    background: linear-gradient(135deg, var(--primary), var(--primary-light));
    display: flex; align-items: center; justify-content: center;
    font-size: 20px;
  }
  .brand-name { font-size: 18px; font-weight: 700; letter-spacing: -0.01em; }
  
  /* Theme Toggle Button */
  .theme-toggle {
    background: var(--surface-high);
    border: 1px solid var(--border);
    color: var(--text);
    padding: 8px 16px;
    border-radius: 99px;
    cursor: pointer;
    font-weight: 600;
    font-size: 14px;
    display: flex;
    align-items: center;
    gap: 8px;
    transition: all 0.2s;
  }
  .theme-toggle:hover { border-color: var(--primary-light); }

  /* Layout */
  .app-body { display: flex; min-height: calc(100vh - 70px); }

  /* Sidebar */
  .sidebar {
    width: 260px; flex-shrink: 0;
    padding: 24px 16px;
    border-right: 1px solid var(--border);
    background: rgba(30,41,59,0.05);
    display: flex; flex-direction: column; gap: 8px;
  }
  .nav-item {
    display: flex; align-items: center; gap: 14px;
    padding: 14px 16px; border-radius: 12px;
    cursor: pointer; border: none; width: 100%;
    background: transparent; color: var(--muted);
    text-align: left; transition: all 0.2s;
    border-left: 3px solid transparent;
  }
  .nav-item:hover { background: var(--surface-high); color: var(--text); }
  .nav-item.active {
    background: var(--primary-dim);
    border-left-color: var(--primary-light);
    color: var(--primary);
  }
  [data-theme="dark"] .nav-item.active { color: white; }

  /* Content */
  .content { flex: 1; padding: 32px; overflow-y: auto; max-width: 1600px; margin: 0 auto; width: 100%; }
  .page-header { display: flex; align-items: center; gap: 16px; margin-bottom: 32px; }
  .page-title { font-size: 28px; font-weight: 700; }
  .page-sub { font-size: 15px; color: var(--muted); }

  /* Panels */
  .panel {
    background: var(--surface); border-radius: 18px;
    padding: 28px; border: 1px solid var(--border);
    box-shadow: 0 4px 20px rgba(0,0,0,0.05);
  }
  .analysis-panel {
    background: linear-gradient(145deg, var(--primary-dim), var(--surface));
    border: 1px solid rgba(129,140,248,0.2);
    margin-bottom: 24px;
  }
  
  .section-title {
    font-size: 13px; font-weight: 700; text-transform: uppercase; 
    color: var(--text); border-left: 4px solid var(--primary); 
    padding-left: 12px; margin-bottom: 24px;
  }

  /* Grid layouts */
  .grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 24px; }
  .grid-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 16px; }
  .calc-grid { display: grid; grid-template-columns: 400px 1fr; gap: 24px; }

  /* Stat Cards */
  .stat-card {
    background: var(--surface-high); border: 1px solid var(--border);
    border-radius: 14px; padding: 18px 22px;
  }
  .stat-card.accent {
    background: linear-gradient(135deg, var(--primary-dim), transparent);
    border-color: var(--primary-light);
  }
  .stat-label { font-size: 12px; color: var(--muted); font-weight: 600; text-transform: uppercase; }
  .stat-value { font-family: 'DM Mono', monospace; font-size: 28px; font-weight: 700; margin-top: 8px; }

  /* Inputs */
  .input-number {
    background: var(--surface-high); border: 1px solid var(--border);
    color: var(--text); border-radius: 8px; padding: 8px 12px;
    width: 140px; text-align: right; font-size: 16px; font-family: 'DM Mono';
  }
  input[type=range] { width: 100%; height: 6px; background: var(--border); border-radius: 99px; -webkit-appearance: none; }
  
  /* Tables */
  .amort-table-wrap { max-height: 300px; overflow-y: auto; border: 1px solid var(--border); border-radius: 12px; }
  table { width: 100%; border-collapse: collapse; background: var(--surface); }
  th { position: sticky; top: 0; background: var(--surface-high); padding: 12px; text-align: right; font-size: 12px; color: var(--muted); }
  td { padding: 10px; text-align: right; border-bottom: 1px solid var(--border); color: var(--text); font-family: 'DM Mono'; font-size: 13px; }

  .calc-page { display: none; }
  .calc-page.active { display: block; }

  @media (max-width: 1024px) { .calc-grid { grid-template-columns: 1fr; } }
</style>
</head>
<body data-theme="dark">

<div class="topbar">
  <div class="topbar-brand">
    <div class="brand-icon">üìä</div>
    <div class="brand-name">Nexus Finance</div>
  </div>
  <button class="theme-toggle" onclick="toggleTheme()">
    <span id="theme-icon">‚òÄÔ∏è</span> <span id="theme-text">Light Mode</span>
  </button>
</div>

<div class="app-body">
  <nav class="sidebar">
    <button class="nav-item active" onclick="switchTab('mortgage', this)">üè† Mortgage</button>
    <button class="nav-item" onclick="switchTab('vehicle', this)">üöó Vehicle</button>
    <button class="nav-item" onclick="switchTab('personal', this)">üí≥ Personal</button>
    <button class="nav-item" onclick="switchTab('savings', this)">üìà Savings</button>
  </nav>

  <main class="content">
    <div id="page-mortgage" class="calc-page active">
      <div class="page-header">
        <div class="page-title">Mortgage Calculator</div>
      </div>
      <div class="calc-grid">
        <div class="panel">
          <div class="input-group">
            <label class="stat-label">Home Price</label>
            <input class="input-number" type="number" id="m-price" value="450000" oninput="calcMortgage()"/>
            <input type="range" id="ms-price" min="100000" max="1000000" step="5000" value="450000" oninput="$('m-price').value=this.value;calcMortgage()"/>
          </div>
          </div>
        <div class="grid-col">
          <div class="panel analysis-panel" id="m-analysis">Summary will appear here...</div>
          <div class="stat-card accent">
            <div class="stat-label">Monthly Payment</div>
            <div class="stat-value" id="m-out-total">$0</div>
          </div>
        </div>
      </div>
    </div>
    </main>
</div>

<script>
  const $ = id => document.getElementById(id);
  const fmt = n => new Intl.NumberFormat('en-US', { style: 'currency', currency: 'USD' }).format(n);

  function toggleTheme() {
    const body = document.body;
    const currentTheme = body.getAttribute('data-theme');
    const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
    
    body.setAttribute('data-theme', newTheme);
    localStorage.setItem('theme', newTheme);
    
    $('theme-icon').textContent = newTheme === 'dark' ? '‚òÄÔ∏è' : 'üåô';
    $('theme-text').textContent = newTheme === 'dark' ? 'Light Mode' : 'Dark Mode';
    
    // Refresh charts to update grid colors
    calcMortgage();
  }

  // Load saved theme
  const savedTheme = localStorage.getItem('theme') || 'dark';
  document.body.setAttribute('data-theme', savedTheme);
  $('theme-icon').textContent = savedTheme === 'dark' ? '‚òÄÔ∏è' : 'Light Mode';

  function calcMortgage() {
    const price = parseFloat($('m-price').value) || 0;
    // Basic logic for demonstration
    $('m-out-total').textContent = fmt(price / 360); 
    $('m-analysis').innerHTML = `A home priced at <strong>${fmt(price)}</strong> would have an estimated base payment of <strong>${fmt(price/360)}</strong> over 30 years.`;
  }

  function switchTab(id, btn) {
    document.querySelectorAll('.calc-page').forEach(p => p.classList.remove('active'));
    document.querySelectorAll('.nav-item').forEach(b => b.classList.remove('active'));
    $(`page-${id}`).classList.add('active');
    btn.classList.add('active');
  }

  // Initialize
  calcMortgage();
</script>
</body>
</html>
